(window.webpackJsonp=window.webpackJsonp||[]).push([[357],{429:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return a})),n.d(t,"default",(function(){return d}));var r=n(3),l=n(7),o=(n(0),n(454)),b=["components"],i={title:"RuleClient"},c={unversionedId:"client_api/ruleclient",id:"client_api/ruleclient",isDocsHomePage:!1,title:"RuleClient",description:"add\\replication\\rule",source:"@site/../docs/client_api/ruleclient.md",sourceDirName:"client_api",slug:"/client_api/ruleclient",permalink:"/documentation/client_api/ruleclient",editUrl:"https://github.com/rucio/documentation/tree/main/docs/../docs/client_api/ruleclient.md",version:"current",frontMatter:{title:"RuleClient"},sidebar:"docs",previous:{title:"RSEClient",permalink:"/documentation/client_api/rseclient"},next:{title:"ScopeClient",permalink:"/documentation/client_api/scopeclient"}},a=[{value:"add_replication_rule",id:"add_replication_rule",children:[]},{value:"delete_replication_rule",id:"delete_replication_rule",children:[]},{value:"get_replication_rule",id:"get_replication_rule",children:[]},{value:"update_replication_rule",id:"update_replication_rule",children:[]},{value:"reduce_replication_rule",id:"reduce_replication_rule",children:[]},{value:"move_replication_rule",id:"move_replication_rule",children:[]},{value:"approve_replication_rule",id:"approve_replication_rule",children:[]},{value:"deny_replication_rule",id:"deny_replication_rule",children:[]},{value:"list_replication_rule_full_history",id:"list_replication_rule_full_history",children:[]},{value:"examine_replication_rule",id:"examine_replication_rule",children:[]},{value:"list_replica_locks",id:"list_replica_locks",children:[]},{value:"list_replication_rules",id:"list_replication_rules",children:[]}],p={toc:a};function d(e){var t=e.components,n=Object(l.a)(e,b);return Object(o.b)("wrapper",Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"add_replication_rule"},"add","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"dids"),": The data identifier set."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"copies"),": The number of replicas."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rse_expression"),": Boolean string expression to give the list of RSEs."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"weight"),": If the weighting option of the replication rule is used, the choice of RSEs takes their weight into account."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"lifetime"),": The lifetime of the replication rules (in seconds)."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"grouping"),": ALL -  All files will be replicated to the same RSE.\nDATASET - All files in the same dataset will be replicated to the same RSE.\nNONE - Files will be completely spread over all allowed RSEs without any grouping considerations at all."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"account"),": The account owning the rule."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"locked"),": If the rule is locked, it cannot be deleted."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"source_replica_expression"),": RSE Expression for RSEs to be considered for source replicas."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"activity"),": Transfer Activity to be passed to FTS."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"notify"),": Notification setting for the rule (Y, N, C)."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"purge_replicas"),": When the rule gets deleted purge the associated replicas immediately."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"ignore_availability"),": Option to ignore the availability of RSEs."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"ask_approval"),": Ask for approval of this replication rule."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"asynchronous"),": Create rule asynchronously by judge-injector."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"priority"),": Priority of the transfers."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"comment"),": Comment about the rule."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"meta"),": Metadata, as dictionary.")))))),Object(o.b)("h2",{id:"delete_replication_rule"},"delete","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("p",null,"Deletes a replication rule and all associated locks."),Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": The id of the rule to be deleted"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"purge_replicas"),": Immediately delete the replicas."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound, AccessDenied")))))),Object(o.b)("h2",{id:"get_replication_rule"},"get","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("p",null,"Get a replication rule."),Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": The id of the rule to be retrieved."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound")))))),Object(o.b)("h2",{id:"update_replication_rule"},"update","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": The id of the rule to be retrieved."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"options"),": Options dictionary."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound")))))),Object(o.b)("h2",{id:"reduce_replication_rule"},"reduce","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": Rule to be reduced."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"copies"),": Number of copies of the new rule."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"exclude_expression"),": RSE Expression of RSEs to exclude."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleReplaceFailed, RuleNotFound")))))),Object(o.b)("h2",{id:"move_replication_rule"},"move","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("p",null,"Move a replication rule to another RSE and, once done, delete the original one."),Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": Rule to be moved."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rse_expression"),": RSE expression of the new rule."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"override"),": Configurations to update for the new rule."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound, RuleReplaceFailed")))))),Object(o.b)("h2",{id:"approve_replication_rule"},"approve","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": Rule to be approved."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound")))))),Object(o.b)("h2",{id:"deny_replication_rule"},"deny","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": Rule to be denied."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound")))))),Object(o.b)("h2",{id:"list_replication_rule_full_history"},"list","_","replication","_","rule","_","full","_","history"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("p",null,"List the rule history of a DID."),Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"scope"),": The scope of the DID."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"name"),": The name of the DID.")))))),Object(o.b)("h2",{id:"examine_replication_rule"},"examine","_","replication","_","rule"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("p",null,"Examine a replication rule for errors during transfer."),Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": Rule to be denied."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound")))))),Object(o.b)("h2",{id:"list_replica_locks"},"list","_","replica","_","locks"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("p",null,"List details of all replica locks for a rule."),Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"rule_id"),": Rule to be denied."))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Raises"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"``: RuleNotFound")))))),Object(o.b)("h2",{id:"list_replication_rules"},"list","_","replication","_","rules"),Object(o.b)("span",{style:{"white-space":"pre"}},Object(o.b)("p",null,"List all replication rules which match a filter"),Object(o.b)("table",{style:{border:"none"}},Object(o.b)("tbody",null,Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Arguments"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"filters"),": dictionary of attributes by which the rules should be filtered"))),Object(o.b)("tr",{style:{border:"none"}},Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Returns"),":")),Object(o.b)("td",{style:{border:"none",backgroundColor:"white",verticalAlign:"top"}},Object(o.b)("p",null,"  True if successful, otherwise false.")))))))}d.isMDXComponent=!0},454:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return j}));var r=n(0),l=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var a=l.a.createContext({}),p=function(e){var t=l.a.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return l.a.createElement(a.Provider,{value:t},e.children)},u="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},O=l.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,b=e.parentName,a=c(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,O=d["".concat(b,".").concat(u)]||d[u]||s[u]||o;return n?l.a.createElement(O,i(i({ref:t},a),{},{components:n})):l.a.createElement(O,i({ref:t},a))}));function j(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,b=new Array(o);b[0]=O;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[u]="string"==typeof e?e:r,b[1]=i;for(var a=2;a<o;a++)b[a]=n[a];return l.a.createElement.apply(null,b)}return l.a.createElement.apply(null,n)}O.displayName="MDXCreateElement"}}]);